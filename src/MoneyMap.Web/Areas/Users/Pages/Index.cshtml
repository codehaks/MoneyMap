@page
@model MoneyMap.Web.Areas.Users.Pages.IndexModel
@{
    ViewBag.Title = "Dashboard";
}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Dashboard</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
        </div>
        <button type="button" class="btn btn-sm btn-outline-primary dropdown-toggle d-flex align-items-center gap-1">
            <i class="fas fa-calendar-alt me-1"></i>
            This Month
        </button>
    </div>
</div>

<div class="row my-4">
    <div class="col-md-4">
        <div class="card card-dashboard h-100">
            <div class="card-body">
                <h5 class="card-title">Total Expenses</h5>
                <h2 class="display-5 fw-bold text-primary">$1,240.56</h2>
                <p class="card-text text-muted">This Month</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-primary" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card card-dashboard h-100">
            <div class="card-body">
                <h5 class="card-title">Budget Used</h5>
                <h2 class="display-5 fw-bold text-success">65%</h2>
                <p class="card-text text-muted">$1,240.56 of $1,900</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card card-dashboard h-100">
            <div class="card-body">
                <h5 class="card-title">Top Category</h5>
                <h2 class="display-5 fw-bold text-warning">Groceries</h2>
                <p class="card-text text-muted">$420.25 (33.8%)</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-4 mb-3">Recent Expenses</h3>
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Category</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Note</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Groceries</td>
                <td>$85.43</td>
                <td>Aug 14, 2025</td>
                <td>Weekly grocery shopping</td>
            </tr>
            <tr>
                <td>Transportation</td>
                <td>$45.00</td>
                <td>Aug 13, 2025</td>
                <td>Gas refill</td>
            </tr>
            <tr>
                <td>Dining Out</td>
                <td>$62.75</td>
                <td>Aug 12, 2025</td>
                <td>Dinner with family</td>
            </tr>
            <tr>
                <td>Utilities</td>
                <td>$120.88</td>
                <td>Aug 10, 2025</td>
                <td>Electricity bill</td>
            </tr>
            <tr>
                <td>Entertainment</td>
                <td>$25.99</td>
                <td>Aug 8, 2025</td>
                <td>Movie tickets</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-between mt-4">
    <a asp-page="/Expenses/Index" class="btn btn-primary">View All Expenses</a>
    <a asp-page="/Expenses/Create" class="btn btn-outline-primary">Add New Expense</a>
</div>

<h3 class="mt-5 mb-3">Monthly Overview</h3>
<canvas class="my-4 w-100" id="expenseChart" width="900" height="380"></canvas>

@section scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ctx = document.getElementById('expenseChart');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'],
                    datasets: [{
                        label: 'Monthly Expenses',
                        data: [1250, 1420, 1320, 1450, 1200, 1350, 1100, 1240],
                        borderWidth: 3,
                        tension: 0.1,
                        fill: false,
                        backgroundColor: 'rgba(13, 110, 253, 0.2)',
                        borderColor: 'rgba(13, 110, 253, 1)',
                        pointBackgroundColor: 'rgba(13, 110, 253, 1)',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Expense Trends'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
}